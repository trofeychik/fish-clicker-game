<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–ª–∏–∫–µ—Ä –Ω–∞ —Ä—ã–±–µ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #e0f7fa;
    }

    #game-container {
      max-width: 500px;
      margin: auto;
      padding: 20px;
    }

    button {
      font-size: 40px;
      padding: 20px;
      margin: 20px;
      cursor: pointer;
    }

    #stats {
      margin: 20px 0;
    }

    .upgrade-btn {
      display: block;
      margin: 10px auto;
      padding: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }

    .upgrade-btn:disabled {
      background-color: gray;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>–ö–ª–∏–∫–µ—Ä –Ω–∞ —Ä—ã–±–µ üêü</h1>
    <div id="stats">
      <p>–£—Ä–æ–≤–µ–Ω—å —Ä—ã–±—ã: <span id="level">1</span></p>
      <p>–ú–æ–Ω–µ—Ç—ã: <span id="coins">0</span></p>
      <p>–ù–∞–∂–∞—Ç–∏–π: <span id="clicks">0</span></p>
    </div>

    <button id="fish-btn">üêü</button>

    <div id="upgrades">
      <button class="upgrade-btn" id="upgrade-level">–£–ª—É—á—à–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å (50 –º–æ–Ω–µ—Ç)</button>
      <button class="upgrade-btn" id="upgrade-multiplier">–£–ª—É—á—à–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ 5 (1000 –º–æ–Ω–µ—Ç)</button>
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.ready();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
    let gameState = {
      level: parseInt(localStorage.getItem('fish_level')) || 1,
      coins: parseInt(localStorage.getItem('coins')) || 0,
      clicks: parseInt(localStorage.getItem('clicks')) || 0,
      multiplier: parseInt(localStorage.getItem('multiplier')) || 1
    };

    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const levelEl = document.getElementById('level');
    const coinsEl = document.getElementById('coins');
    const clicksEl = document.getElementById('clicks');
    const fishBtn = document.getElementById('fish-btn');
    const upgradeLevelBtn = document.getElementById('upgrade-level');
    const upgradeMultBtn = document.getElementById('upgrade-multiplier');

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
    function updateUI() {
      levelEl.textContent = gameState.level;
      coinsEl.textContent = gameState.coins;
      clicksEl.textContent = gameState.clicks;

      upgradeLevelBtn.disabled = gameState.coins < 50;
      upgradeMultBtn.disabled = gameState.coins < 1000;
    }

    // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ä—ã–±—É
    fishBtn.addEventListener('click', () => {
      gameState.coins += gameState.multiplier;
      gameState.clicks++;

      // –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∫–∞–∂–¥—ã–µ 10 –Ω–∞–∂–∞—Ç–∏–π
      if (gameState.clicks % 10 === 0) {
        gameState.level++;
      }

      updateUI();
      saveGame();
    });

    // –£–ª—É—á—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
    upgradeLevelBtn.addEventListener('click', () => {
      if (gameState.coins >= 50) {
        gameState.level++;
        gameState.coins -= 50;
        updateUI();
        saveGame();
      }
    });

    // –£–ª—É—á—à–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è
    upgradeMultBtn.addEventListener('click', () => {
      if (gameState.coins >= 1000 && gameState.multiplier === 1) {
        gameState.multiplier = 5;
        gameState.coins -= 1000;
        updateUI();
        saveGame();
      }
    });

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    function saveGame() {
      localStorage.setItem('fish_level', gameState.level);
      localStorage.setItem('coins', gameState.coins);
      localStorage.setItem('clicks', gameState.clicks);
      localStorage.setItem('multiplier', gameState.multiplier);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI
    updateUI();
  </script>
</body>
</html>